!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e||self).createPersistedState=r()}(this,function(){var e=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function t(e,r){return!1!==r.clone&&r.isMergeableObject(e)?u(Array.isArray(e)?[]:{},e,r):e}function n(e,r,n){return e.concat(r).map(function(e){return t(e,n)})}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(r){return e.propertyIsEnumerable(r)}):[]}(e))}function i(e,r){try{return r in e}catch(e){return!1}}function u(r,c,a){(a=a||{}).arrayMerge=a.arrayMerge||n,a.isMergeableObject=a.isMergeableObject||e,a.cloneUnlessOtherwiseSpecified=t;var f=Array.isArray(c);return f===Array.isArray(r)?f?a.arrayMerge(r,c,a):function(e,r,n){var c={};return n.isMergeableObject(e)&&o(e).forEach(function(r){c[r]=t(e[r],n)}),o(r).forEach(function(o){(function(e,r){return i(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))})(e,o)||(c[o]=i(e,o)&&n.isMergeableObject(r[o])?function(e,r){if(!r.customMerge)return u;var t=r.customMerge(e);return"function"==typeof t?t:u}(o,n)(e[o],r[o],n):t(r[o],n))}),c}(r,c,a):t(c,a)}u.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,t){return u(e,t,r)},{})};var c=u,a=function(){},f=function(e){return Array.isArray(e)&&e.length>0};return function(e){void 0===e&&(e={});var r=e.storage||window&&window.localStorage,t=e.key||"pinia";function n(e){var t=r.getItem(e);try{return"string"==typeof t?JSON.parse(t):"object"==typeof t?t:void 0}catch(e){}}function o(e,t){return r.setItem(e,JSON.stringify(t))}function i(){return!0}function u(e,r){return f(r)?r.reduce(function(r,t){return function(e,r,t,n){return!/^(__proto__|constructor|prototype)$/.test(r)&&((r=r.split?r.split("."):r.slice(0)).slice(0,-1).reduce(function(e,r){return e[r]=e[r]||{}},e)[r.pop()]=t),e}(r,""+t,(n=e,void 0===(n=((o=t).split?o.split("."):o).reduce(function(e,r){return e&&e[r]},n))?void 0:n));var n,o},{}):e}function s(e){return function(r){return e.$subscribe(r)}}(e.assertStorage||function(){r.setItem("@@","1"),r.removeItem("@@")})(r);var l,y=function(){return(e.getState||n)(t)};return e.fetchBeforeUse&&(l=y()),function(r){var n=r.store,p=r.pinia;if(e.fetchBeforeUse||(l=y()),"object"==typeof l&&null!==l){var b=n.$id;l[b]&&(n.$state=e.overwrite?l:c(n.$state,l[b],{arrayMerge:e.arrayMerger||function(e,r){return r},clone:!1}),(e.rehydrated||a)(n))}(e.subscriber||s)(n)(function(r,a){var s=p.state.value,b=n.$id;if(e.fetchBeforeUse||(l=y()),(e.filter||i)(r)){var d=c(l,f(e.paths)?(e.reducer||u)(s,e.paths.filter(function(e){return-1!==e.indexOf(b)})):s,{arrayMerge:e.arrayMerger||function(e,r){return r},clone:!1});(e.setState||o)(t,d)}})}}});
//# sourceMappingURL=pinia-persistedstate.umd.js.map
